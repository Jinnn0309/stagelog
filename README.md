# StageLog 微信小程序

这是一个从 React Web 应用转换而来的微信小程序，用于记录和追踪用户观看的演出信息。

## 功能特性

### 🎭 核心功能
- **演出记录管理** - 添加、编辑、删除演出记录
- **智能票根解析** - 自动解析票根信息，快速填写表单
- **图片上传** - 支持海报和座位图/票根照片
- **演职人员管理** - 记录演员和角色信息

### 📱 用户界面
- **响应式设计** - 适配微信小程序界面规范
- **暗黑模式支持** - 自动适配系统主题
- **沉浸式横幅** - 美观的首页设计
- **流畅动画** - 平滑的页面过渡和交互效果

### 📊 数据统计
- **日历视图** - 按日历查看演出安排
- **数据可视化** - 消费统计、场馆分布图表
- **成就系统** - 观剧徽章和里程碑
- **历史记录** - 完整的观剧历史

## 项目结构

```
src/
├── app.js              # 小程序入口文件
├── app.json            # 小程序配置文件
├── app.wxss            # 全局样式文件
├── sitemap.json        # 搜索配置
├── pages/              # 页面文件
│   ├── auth/           # 登录页面
│   ├── home/           # 首页
│   ├── calendar/       # 日历页面
│   ├── stats/          # 统计页面
│   ├── settings/       # 设置页面
│   └── form/           # 表单页面
├── components/         # 组件文件
│   └── show-list/      # 演出列表组件
├── services/           # 服务层
│   └── storageService.js # 数据存储服务
├── utils/              # 工具函数
│   ├── auth.js         # 用户认证工具
│   └── common.js       # 通用工具函数
└── types.js            # 数据类型定义
```

## 技术实现

### 🔄 数据转换
- **状态管理** - 从 React useState 转换为小程序 data 属性
- **生命周期** - 对应 React hooks 到小程序生命周期
- **事件处理** - 适配小程序事件绑定机制

### 📦 组件架构
- **页面组件** - 使用小程序 Page 构造器
- **通用组件** - 使用小程序 Component 构造器
- **样式系统** - 从 CSS/Tailwind 转换为 WXSS

### 💾 数据持久化
- **本地存储** - 使用 wx.setStorageSync 替代 localStorage
- **数据结构** - 保持原有的 JSON 数据格式
- **用户认证** - 实现简单的用户登录状态管理

## 页面功能

### 🔐 登录页面 (auth)
- 简洁的用户名登录界面
- 支持登录/注册模式切换
- 主题自适应

### 🏠 首页 (home)
- 沉浸式横幅设计
- 待看清单和已看存档切换
- 快速操作按钮
- 卡片式列表展示

### 📅 日历页面 (calendar)
- 月度日历视图
- 有演出日期高亮显示
- 月度统计信息
- 支持月份切换

### 📈 统计页面 (stats)
- 多时间维度统计（日/月/年）
- 消费和演出数量展示
- 场馆分布图表
- 历史记录列表

### ⚙️ 设置页面 (settings)
- 用户信息展示
- 成就徽章系统
- 主题切换开关
- 退出登录功能

### 📝 表单页面 (form)
- 完整的演出信息录入
- 智能票根解析功能
- 地点快速选择
- 图片上传和预览
- 演职人员管理

## 使用说明

### 🚀 快速开始
1. 在微信开发者工具中导入项目
2. 选择 `src` 目录作为项目根目录
3. 配置小程序 AppID（可选）
4. 点击编译运行

### 📝 数据录入
1. 点击底部导航栏的"添加"按钮
2. 填写演出基本信息
3. 可使用智能解析功能快速录入票根信息
4. 上传海报和座位照片
5. 添加演职人员信息

### 📊 数据查看
- 在首页查看待看和已看演出列表
- 在日历页按时间查看演出安排
- 在统计页查看消费和观剧数据

### ⚙️ 个性化设置
- 在设置页查看个人成就徽章
- 切换明暗主题模式
- 管理用户账户

## 开发说明

### 🛠 开发环境
- 微信开发者工具
- ES6+ JavaScript
- WXSS 样式系统

### 📋 待优化项
- 图表组件替换为小程序原生实现
- 图片压缩和优化
- 数据同步到云端服务
- 分享功能完善

### 🔄 从 React 的主要改动
1. **状态管理** - useState -> this.data + setData
2. **路由导航** - React Router -> wx.navigateTo/wx.switchTab
3. **事件处理** - React 事件 -> 小程序 bind 事件
4. **样式系统** - CSS/Windi CSS -> WXSS
5. **组件架构** - 函数组件 -> Page/Component 构造器
6. **生命周期** - useEffect -> onLoad/onShow 等

## 注意事项

- 保持了原有的 UI 设计风格和交互体验
- 数据存储使用小程序本地存储，换设备会丢失数据
- 图片上传使用临时文件路径，重启小程序后可能失效
- 部分高级功能（如图表）需要根据小程序能力调整实现

## License

MIT License